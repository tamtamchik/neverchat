/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/*
 * $Id: base64.js,v 2.15 2014/04/05 12:58:57 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *    http://opensource.org/licenses/mit-license
 *
 *  References:
 *    http://en.wikipedia.org/wiki/Base64
 */

//! moment.js
//! version : 2.7.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

!function(){var t,e,i;!function(n){function s(t,e){return w.call(t,e)}function o(t,e){var i,n,s,o,r,a,u,h,c,l,p,f=e&&e.split("/"),d=y.map,m=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),r=t.length-1,y.nodeIdCompat&&O.test(t[r])&&(t[r]=t[r].replace(O,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&d){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(s=d[f.slice(0,l).join("/")],s&&(s=s[n])){o=s,a=c;break}if(o)break;!u&&m&&m[n]&&(u=m[n],h=c)}!o&&u&&(o=u,a=h),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function r(t,e){return function(){return f.apply(n,S.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function u(t){return function(e){_[t]=e}}function h(t){if(s(g,t)){var e=g[t];delete g[t],v[t]=!0,p.apply(n,e)}if(!s(_,t)&&!s(v,t))throw new Error("No "+t);return _[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,f,d,m,_={},g={},y={},v={},w=Object.prototype.hasOwnProperty,S=[].slice,O=/\.js$/;d=function(t,e){var i,n=c(t),s=n[0];return t=n[1],s&&(s=o(s,e),i=h(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):o(t,e):(t=o(t,e),n=c(t),s=n[0],t=n[1],s&&(i=h(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=_[t];return"undefined"!=typeof e?e:_[t]={}},module:function(t){return{id:t,uri:"",exports:_[t],config:l(t)}}},p=function(t,e,i,o){var a,c,l,p,f,y,w=[],S=typeof i;if(o=o||t,"undefined"===S||"function"===S){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=d(e[f],o),c=p.f,"require"===c)w[f]=m.require(t);else if("exports"===c)w[f]=m.exports(t),y=!0;else if("module"===c)a=w[f]=m.module(t);else if(s(_,c)||s(g,c)||s(v,c))w[f]=h(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,r(o,!0),u(c),{}),w[f]=_[c]}l=i?i.apply(_[t],w):void 0,t&&(a&&a.exports!==n&&a.exports!==_[t]?_[t]=a.exports:l===n&&y||(_[t]=l))}else t&&(_[t]=i)},t=e=f=function(t,e,i,s,o){if("string"==typeof t)return m[t]?m[t](e):h(d(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=s,s=o),s?p(n,t,e,i):setTimeout(function(){p(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=_,i=function(t,e,i){e.splice||(i=e,e=[]),s(_,t)||s(g,t)||(g[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function n(t){return a[t]}function s(t,e){a[t]=e}function o(t){var e=a.length;return s(e,t),e}function r(t){s(t,null)}var a=[];i.exports={register:o,unregister:r,get:n,set:s}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,n,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(e),r=Math.sin(e),a=Math.cos(i),u=Math.sin(i),h=[o*a,n*u+s*r*a,s*u-n*r*a,0,-o*u,n*a-s*r*u,s*a+n*r*u,0,r,-s*o,n*o,0,0,0,0,1];return h},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,u=t[1]*t[1]*s,h=t[1]*t[2]*s,c=t[2]*t[2]*s,l=t[0]*i,p=t[1]*i,f=t[2]*i,d=[o+n,r+f,a-p,0,r-f,u+n,h+l,0,a+p,h-l,c+n,0,0,0,0,1];return d},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,n,s])},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*n,l=1/c,p=[l*e,-l*s,l*a,0,-l*i,l*o,-l*u,0,l*n,-l*r,l*h,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),u=[e[0]+i*a,e[1],e[2]],h=2/n(u);if(h>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-h*u[0]*u[0],c[5]=1-h*u[1]*u[1],c[10]=1-h*u[2]*u[2],c[1]=-h*u[0]*u[1],c[2]=-h*u[0]*u[2],c[6]=-h*u[1]*u[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var l=r.multiply(c,t),p=[l[5],l[6]],f=o(p[0]),d=s(p),m=[p[0]+f*d,p[1]],_=2/n(m),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-_*m[0]*m[0],g[10]=1-_*m[1]*m[1],g[6]=-_*m[0]*m[1],g[9]=g[6];var y=r.multiply(g,c),v=r.multiply(y,t),w=r.scale(v[0]<0?-1:1,v[5]<0?-1:1,v[10]<0?-1:1);v=r.multiply(v,w),y=r.multiply(w,y);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(y[4],y[5])),S.scale=[v[0],v[5],v[10]],S.skew=[Math.atan2(v[9],S.scale[2]),Math.atan2(v[8],S.scale[2]),Math.atan2(v[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function n(){this.result={}}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=t("./Transform");n._instance=new n,n.parse=function(t,e){return n._instance.parse(t,e)},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){var n,a,u,h,c,l,p;if("number"==typeof t){if(n=t,u=e.transform,l=e.align||e.origin,e.size&&l&&(l[0]||l[1])){var f=[l[0]*e.size[0],l[1]*e.size[1],0];u=o.thenMove(u,s(f,i))}this.result[n]={transform:u,opacity:e.opacity,origin:e.origin||r,align:e.align||e.origin||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,i);else{a=t.target,u=e.transform,h=e.opacity,c=e.origin,l=e.align,p=e.size;var m=i;if(void 0!==t.opacity&&(h=e.opacity*t.opacity),t.transform&&(u=o.multiply(e.transform,t.transform)),t.origin&&(c=t.origin,m=e.transform),t.align&&(l=t.align),t.size){var _=e.size;p=[void 0!==t.size[0]?t.size[0]:_[0],void 0!==t.size[1]?t.size[1]:_[1]],_&&(l||(l=c),l&&(l[0]||l[1])&&(u=o.thenMove(u,s([l[0]*_[0],l[1]*_[1],0],i))),c&&(c[0]||c[1])&&(u=o.moveThen([-c[0]*p[0],-c[1]*p[1],0],u))),m=e.transform,c=null,l=null}this._parseSpec(a,{transform:u,opacity:h,origin:c,align:l,size:p},m)}}},i.exports=n}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,e,i){for(var n=r.parse(t,e),a=Object.keys(n),u=0;u<a.length;u++){var h=a[u],c=o.get(h),l=n[h];l.allocator=e.allocator;var p=c.commit(l);p?s(p,e,i):i[h]=l}}var o=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var n=e[i];if(void 0===this._resultCache[n]){var r=o.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=n}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,e){var i=this.listeners[t].indexOf(e);return i>=0&&this.listeners[t].splice(i,1),this},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function n(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},n.prototype.emit=function(t,e){s.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=n}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},i.exports=n}),i("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("famous/utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=s.after(t.length,i),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,s){var o,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){o=[];for(var u=0;u<t.length;u++)o[u]="number"==typeof t[u]?a*(t[u]-e[u])/n:0}else o=a*(t-e)/n;return o}function u(t,e,i){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]="number"==typeof t[o]?s(t[o],e[o],i):t[o]}else n=s(t,e,i);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var h={};n.registerCurve=function(t,e){return h[t]?!1:(h[t]=e,!0)},n.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},n.getCurve=function(t){var e=h[t];if(void 0!==e)return e;throw new Error("curve not registered")},n.getCurves=function(){return h},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=o(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,s.bind(this))}var o=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||s.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function n(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:c,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var o=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),h=t("famous/transitions/Transitionable"),c=[0,0];s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},s.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},s.prototype.on=function(t,e){return this._eventOutput.on(t,e)},s.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=s}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function n(){y.runLoop?(c.step(),requestAnimationFrame(n)):m=!1}function s(){for(var t=0;t<l.length;t++)l[t].emit("resize");g.emit("resize")}var o,r,a=t("./Context"),u=t("./EventHandler"),h=t("./OptionsManager"),c={},l=[],p=[],f=[],d=Date.now(),m=!0,_={},g=new u,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},v=new h(y),w=10;c.step=function(){var t=Date.now();if(!(r&&r>t-d)){var e=0;for(o=t-d,d=t,g.emit("prerender"),e=0;e<p.length;e++)p[e].call(this);for(p.splice(0);f.length&&Date.now()-t<w;)f.shift().call(this);for(e=0;e<l.length;e++)l[e].update();g.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),c.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(c):g.pipe(t)},c.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(c):g.unpipe(t)},c.on=function(t,e){return t in _||(_[t]=g.emit.bind(g,t),document.body?document.body.addEventListener(t,_[t]):c.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,_[t]))),g.on(t,e)},c.emit=function(t,e){return g.emit(t,e)},c.removeListener=function(t,e){return g.removeListener(t,e)},c.getFPS=function(){return 1e3/o},c.setFPSCap=function(t){r=Math.floor(1e3/t)},c.getOptions=function(){return v.getOptions.apply(v,arguments)},c.setOptions=function(){return v.setOptions.apply(v,arguments)},c.createContext=function(t){var e=!1;t||(t=document.createElement(y.containerType),t.classList.add(y.containerClass),e=!0);var i=new a(t);return c.registerContext(i),e&&c.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},c.registerContext=function(t){return l.push(t),t},c.nextTick=function(t){p.push(t)},c.defer=function(t){f.push(t)},v.on("change",function(t){"fpsCap"===t.id?c.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(n))}),i.exports=c}),i("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,e,i){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),o=t("./OptionsManager"),r=t("./RenderNode");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.add=function(){return this._node.add.apply(this._node,arguments)},n.prototype._add=n.prototype.add,n.prototype.render=function(){return this._node.render()},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=n}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function n(t){this._final=r.identity.slice(),this.translate=new o([0,0,0]),this.rotate=new o([0,0,0]),this.skew=new o([0,0,0]),this.scale=new o([1,1,1]),t&&this.set(t)}function s(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var o=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");n.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},n.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},n.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=s.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},n.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},n.prototype.set=function(t,e,i){this._final=t;var n=r.interpret(t),s=i?a.after(4,i):null;return this.translate.set(n.translate,e,s),this.rotate.set(n.rotate,e,s),this.skew.set(n.skew,e,s),this.scale.set(n.scale,e,s),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?s.call(this):this._final
},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=n}),i("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var o=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},n.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},n.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getAlign=function(){return this._alignGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},i.exports=n}),i("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformState=new a(o.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size))}var s=t("famous/core/Modifier"),o=t("famous/core/Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.setTransform=function(t,e,i){return this._transformState.set(t,e,i),this},n.prototype.setOpacity=function(t,e,i){return this._opacityState.set(t,e,i),this},n.prototype.setOrigin=function(t,e,i){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,e,i),this)},n.prototype.setAlign=function(t,e,i){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,e,i),this)},n.prototype.setSize=function(t,e,i){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,e,i),this)},n.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},n.prototype.getTransform=function(){return this._transformState.get()},n.prototype.getFinalTransform=function(){return this._transformState.getFinal()},n.prototype.getOpacity=function(){return this._opacityState.get()},n.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},n.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},n.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},n.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=n}),i("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=p.register(this),t&&this.setOptions(t),this._currTarget=null}function s(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function u(t){for(var e in this.properties)t.style[e]=""}function h(t){t[12]=Math.round(t[12]*m)/m,t[13]=Math.round(t[13]*m)/m;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function c(t){return 100*t[0]+"% "+100*t[1]+"%"}function l(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var p=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),m=window.devicePixelRatio||1,_=void 0!==document.createElement("div").style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g;g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=h(e)}:_?function(t,e){t.style.webkitTransform=h(e)}:function(t,e){t.style.transform=h(e)};var y=_?function(t,e){t.style.webkitTransformOrigin=c(e)}:function(t,e){t.style.transformOrigin=c(e)},v=_?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",s.call(this,e),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,s=t.origin,o=t.size;if(this._classesDirty){r.call(this,e);for(var u=this.getClassList(),h=0;h<u.length;h++)e.classList.add(u[h]);this._classesDirty=!1}if(this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1),this.size){var c=o;o=[this.size[0],this.size[1]],void 0===o[0]&&c[0]&&(o[0]=c[0]),void 0===o[1]&&c[1]&&(o[1]=c[1])}if(o[0]===!0&&(o[0]=e.clientWidth),o[1]===!0&&(o[1]=e.clientHeight),l(this._size,o)&&(this._size||(this._size=[0,0]),this._size[0]=o[0],this._size[1]=o[1],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=null,this._opacity=0,void v(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=n>=1?"0.999999":n),l(this._origin,s)||d.notEquals(this._matrix,i)||this._sizeDirty){i||(i=d.identity),this._matrix=i;var p=i;s&&(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1],p=d.thenMove(i,[-this._size[0]*s[0],-this._size[1]*s[1],0]),y(e,s)),g(e,p)}this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1)},n.prototype.cleanup=function(t){var e=0,i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,u.call(this,i);var n=this.getClassList();for(r.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);o.call(this,i),this._currTarget=null,t.deallocate(i),v(i)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=n}),i("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function n(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("famous/core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="img",n.prototype.elementClass="famous-surface",n.prototype.setContent=function(t){this._imageUrl=t,this._contentDirty=!0},n.prototype.deploy=function(t){t.src=this._imageUrl||""},n.prototype.recall=function(t){t.src=""},i.exports=n}),i("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,e,i){function n(t){return c.on(l,t),t}function s(t,e){var i=p(),s=function(){var n=p();n-i>=e&&(t.apply(this,arguments),c.removeListener(l,s))};return n(s)}function o(t,e){var i=p(),s=function(){var n=p();n-i>=e&&(t.apply(this,arguments),i=p())};return n(s)}function r(t,e){if(void 0===e)return void 0;var i=function(){e--,0>=e&&(t.apply(this,arguments),u(i))};return n(i)}function a(t,e){e=e||1;var i=e,s=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return n(s)}function u(t){c.removeListener(l,t)}function h(t,e){var i,n,o,r,a;return function(){n=this,a=arguments,o=p();var h=function(){var u=p-o;e>u?i=s(h,e-u):(i=null,r=t.apply(n,a))};return u(i),i=s(h,e),r}}var c=t("famous/core/Engine"),l="prerender",p=window.performance?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:s,setInterval:o,debounce:h,after:r,every:a,clear:u}}),i("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,e,i){function n(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var s=t("famous/core/Surface"),o=t("famous/core/Context");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},n.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},n.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},i.exports=n}),i("famous/views/HeaderFooterLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new u,this.footer=new u,this.content=new u}function s(t,e){var i=t.getSize();return i?i[this.options.direction]:e}function o(t){return this.options.direction===n.DIRECTION_X?h.translate(t,0,0):h.translate(0,t,0)}function r(t,e){return this.options.direction===n.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=t("famous/core/Entity"),u=t("famous/core/RenderNode"),h=t("famous/core/Transform"),c=t("famous/core/OptionsManager");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},n.prototype.render=function(){return this._entityId},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.commit=function(t){var e=t.transform,i=t.origin,n=t.size,a=t.opacity,u=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this.header,this.options.defaultHeaderSize),c=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this.footer,this.options.defaultFooterSize),l=n[this.options.direction]-u-c;n&&(e=h.moveThen([-n[0]*i[0],-n[1]*i[1],0],e));var p=[{size:r.call(this,u,n),target:this.header.render()},{transform:o.call(this,u),size:r.call(this,l,n),target:this.content.render()},{transform:o.call(this,u+l),size:r.call(this,c,n),target:this.footer.render()}];return{transform:e,opacity:a,size:n,target:p}},i.exports=n}),i("famous/transitions/Easing",["require","exports","module"],function(t,e,i){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2===(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5}};i.exports=n}),i("views/ChatHeaderView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing"],function(t,e,i){function n(){o.apply(this,arguments),s.call(this)}function s(){this.headerBackgroundSurface=new r({properties:this.options.backgroundProperties}),this.headerTitleSurface=new r({classes:["title","no-selection"],size:[this.options.titleWidth,this.options.headerSize-this.options.titleOffset],content:"neverchat<span>.io</span>",properties:this.options.titleOptions}),this.headerBackgroundModifier=new u({transform:a.translate(0,0,this.options.baseZIndex)}),this.headerTitleModifier=new u({origin:[.5,0],transform:a.translate(0,0,this.options.baseZIndex+1)}),this.add(this.headerBackgroundModifier).add(this.headerBackgroundSurface),this.add(this.headerTitleModifier).add(this.headerTitleSurface)}var o=t("famous/core/View"),r=t("famous/core/Surface"),a=t("famous/core/Transform"),u=t("famous/modifiers/StateModifier"),h=t("famous/transitions/Easing");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={animationDuration:1200,backgroundProperties:{backgroundColor:"rgba(220, 220, 220, 0.5)"},headerSize:64,titleOffset:22,titleOptions:{fontSize:"24px",textAlign:"center",color:"white",letterSpacing:"1px",textShadow:"0px 1px 1px rgba(100,100,100,0.5)"},titleWidth:300,baseZIndex:1},n.prototype.bounceTitle=function(){this.headerTitleModifier.setTransform(a.translate(0,this.options.titleOffset,this.options.baseZIndex+1),{duration:2*this.options.animationDuration,curve:h.outElastic})},i.exports=n}),i("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function n(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",s.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(t){t.target!==this._currTarget&&this.blur()}.bind(this))}var s=t("famous/core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="input",n.prototype.elementClass="famous-surface",n.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},n.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},n.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},n.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},n.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},n.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},n.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},n.prototype.getName=function(){return this._name},n.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},i.exports=n}),i("famous/utilities/KeyCodes",["require","exports","module"],function(t,e,i){var n={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};i.exports=n}),i("views/ChatFooterView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/surfaces/InputSurface","famous/views/HeaderFooterLayout","famous/utilities/KeyCodes"],function(t,e,i){function n(){u.apply(this,arguments),s.call(this),o.call(this),r.call(this)}function s(){this.footerBackgroundSurface=new h({properties:this.options.backgroundProperties}),this.footerLayout=new f({headerSize:4,footerSize:this.options.sendButtonWidth,direction:0});var t=new l({transform:c.translate(0,0,this.options.baseZIndex+1)});this.footerBackgroundModifier=new l({transform:c.translate(0,0,this.options.baseZIndex)}),this.add(this.footerBackgroundModifier).add(this.footerBackgroundSurface),this.add(t).add(this.footerLayout)}function o(){this.messageInput=new p({size:[void 0,32],origin:[.5,.5],name:"messageInput",placeholder:"Type message here",value:"",type:"text",properties:this.options.messageInputOptions}),this.messageButton=new h({classes:["no-selection"],size:[this.options.sendButtonWidth-8,32],origin:[.5,.5],content:"Send",properties:this.options.messageButtonOptions}),this.messageInputModifier=new l({origin:[.5,.5]}),this.messageButtonModifier=new l({origin:[.5,.5]}),this.footerLayout.content.add(this.messageInputModifier).add(this.messageInput),this.footerLayout.footer.add(this.messageButtonModifier).add(this.messageButton)}function r(){this.messageButton.on("click",a.bind(this)),this.messageInput.on("keydown",a.bind(this))}function a(t){var e=this.messageInput.getValue();("keydown"===t.type&&t.which===d.ENTER||"click"===t.type)&&""!==e&&(this._eventOutput.emit("sendMessage",e),this.messageInput.setValue(""))}var u=t("famous/core/View"),h=t("famous/core/Surface"),c=t("famous/core/Transform"),l=t("famous/modifiers/StateModifier"),p=t("famous/surfaces/InputSurface"),f=t("famous/views/HeaderFooterLayout"),d=t("famous/utilities/KeyCodes");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={animationDuration:1200,backgroundProperties:{backgroundColor:"rgba(220, 220, 220, 0.5)"},messageButtonOptions:{height:"26px",lineHeight:"26px",border:"2px solid transparent",background:"transparent",textAlign:"center",fontSize:"16px",color:"rgba(255, 255, 255, 1)",boxShadow:"none",fontWeight:"600",textShadow:"0px 1px 1px rgba(100,100,100,0.5)"},messageInputOptions:{height:"26px",padding:"1px 5px",lineHeight:"26px",border:"2px solid rgba(255, 255, 255, 0.9)",background:"transparent",borderRadius:"5px",fontSize:"16px",color:"rgba(255, 255, 255, 1)",boxShadow:"none",textShadow:"0px 1px 1px rgba(100,100,100,0.5)"},sendButtonWidth:60,baseZIndex:1},i.exports=n}),i("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=M(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function h(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function c(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)h.call(this,i,t);e++}}function l(t,e){t.integrateVelocity(e)}function p(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity()}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit("update",t)}function m(t){u.call(this,t),this.forEach(l,t),this.forEachBody(p,t),c.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function _(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e,e<i.sleepTolerance&&i.sleep()}),t}function g(){for(var t=0,e=this._forces.length-1;e>-1;e--)t+=this._forces[e].getEnergy()||0;return t}function y(){for(var t=0,e=this._constraints.length-1;e>-1;e--)t+=this._constraints[e].getEnergy()||0;return t}var v=t("famous/core/EventHandler"),w=17,S=1e3/120,O=17;n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var M=function(){return Date.now}();n.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},n.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var n=0;n<Object.keys(this._agents).length;n++)this.detachFrom(n,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,e,i){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],e,i);return n}return o.call(this,t,e,i)},n.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=s.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,s=n.indexOf(e);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},n.prototype.getEnergy=function(){return _.call(this)+g.call(this)+y.call(this)},n.prototype.step=function(){var t=M(),e=t-this._prevTime;this._prevTime=t,S>e||(e>O&&(e=O),m.call(this,w))},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},n.prototype.wake=function(){this._prevTime=M(),this.emit("start",this),this._isSleeping=!1},n.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},n.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new v),this._eventHandler.on(t,e)},i.exports=n}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function s(t,e,i){return this.x=t,this.y=e,this.z=i,this}function o(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var u=new n(0,0,0);n.prototype.add=function(t){return s.call(u,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.call(u,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.call(u,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.call(u,n*r-i*a,e*a-n*o,i*o-e*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(u,e,i*o-n*r,i*r+n*o)},n.prototype.rotateY=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);
return s.call(u,n*r+e*o,i,n*o-e*r)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(u,e*o-i*r,e*r+i*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(u,this.mult(t/e)):s.call(u,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?o.call(this,t):t instanceof n?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},n.prototype.setXYZ=function(){return s.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){r.call(t,u)},n.prototype.clear=function(){return s.call(this,0,0,0)},n.prototype.cap=function h(h){if(1/0===h)return r.call(u,this);var t=this.norm();return t>h?r.call(u,this.mult(h/t)):r.call(u,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(u,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},i.exports=n}),i("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("famous/core/OptionsManager");n.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.integrateVelocity=function(t,e){var i=t.velocity,n=t.inverseMass,s=t.force;s.isZero()||(i.add(s.mult(e*n)).put(i),s.clear())},n.prototype.integratePosition=function(t,e){var i=t.position,n=t.velocity;this.options.velocityCap&&n.cap(this.options.velocityCap).put(n),i.add(n.mult(e)).put(i)},n.prototype.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,n=t.torque;n.isZero()||(this.options.angularVelocityCap&&n.cap(this.options.angularVelocityCap).put(n),i.add(n.mult(e)).put(i),n.clear())},n.prototype.integrateOrientation=function(t,e){var i=t.orientation,n=t.angularVelocity;n.isZero()||i.add(i.multiply(n).scalarMultiply(.5*e)).put(i)},i.exports=n}),i("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function n(t){t=t||{},this.position=new o,this.velocity=new o,this.force=new o;var e=n.DEFAULT_OPTIONS;this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:e.mass,this.axis=void 0!==t.axis?t.axis:e.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),u=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},n.SLEEP_TOLERANCE=1e-7,n.AXES={X:0,Y:1,Z:2},n.INTEGRATOR=new u;var h={start:"start",update:"update",end:"end"},c=function(){return Date.now}();n.prototype.sleep=function(){this._isSleeping||(this.emit(h.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(h.start,this),this._isSleeping=!1,this._prevTime=c())},n.prototype.isBody=!1,n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.positionFrom=function(t){this._positionGetter=t},n.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},n.prototype.integrateVelocity=function(t){n.INTEGRATOR.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){n.INTEGRATOR.integratePosition(this,t)},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.axis,i=this.transform;return void 0!==e&&(e&~n.AXES.X&&(t.x=0),e&~n.AXES.Y&&(t.y=0),e&~n.AXES.Z&&(t.z=0)),i[12]=t.x,i[13]=t.y,i[14]=t.z,i},n.prototype.modify=function(t){var e=this._spec;return e.transform=this.getTransform(),e.target=t,e},n.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,e,i){function n(t){this.force=new o(t),this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var o=t("famous/math/Vector"),r=t("famous/core/EventHandler");n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},n.prototype.applyForce=function(t){t.applyForce(this.force)},n.prototype.getEnergy=function(){return this._energy},n.prototype.setEnergy=function(t){this._energy=t},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},n.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.DEFAULT_OPTIONS={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},n.prototype.applyForce=function(t){for(var e=this.options.strength,i=this.options.forceFunction,n=this.force,s=0;s<t.length;s++){var o=t[s];i(o.velocity).mult(-e).put(n),o.applyForce(n)}},n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=n}),i("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new c(0,0,0),u.call(this),h.call(this)}function s(t){this.forceFunction=t}function o(){var t=this.options;t.stiffness=Math.pow(2*l/t.period,2)}function r(){var t=this.options;t.damping=4*l*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function u(){s.call(this,this.options.forceFunction),o.call(this),r.call(this)}var h=t("./Force"),c=t("famous/math/Vector");n.prototype=Object.create(h.prototype),n.prototype.constructor=n;var l=Math.PI;n.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,n=Math.max(Math.min(t,i),-i);return n/(1-n*n/(e*e))},HOOK:function(t){return t}},n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof c&&(this.options.anchor=t.anchor.position),t.anchor instanceof c&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new c(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),u.call(this)},n.prototype.applyForce=function(t,e){for(var i=this.force,n=this.disp,s=this.options,o=s.stiffness,r=s.damping,u=s.length,h=s.maxLength,c=s.anchor||e.position,l=0;l<t.length;l++){var p=t[l],f=p.position,d=p.velocity;c.sub(f).put(n);var m=n.norm()-u;if(0===m)return;var _=p.mass;o*=_,r*=_,n.normalize(o*this.forceFunction(m,h)).put(i),r&&(e?i.add(d.sub(e.velocity).mult(-r)).put(i):i.add(d.mult(-r)).put(i)),p.applyForce(i),e&&e.applyForce(i.mult(-1)),this.setEnergy(a(o,m))}},n.prototype.getEnergy=function(t){var e=this.options,i=e.length,n=e.anchor,s=e.stiffness,o=n.sub(t.position).norm()-i;return.5*s*o*o},n.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new c),this.options.anchor.set(t)},i.exports=n}),i("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function n(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}n.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},n.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},n.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},n.Backing.prototype.reindex=function(t,e,i){if(this.array[0]){for(var n=0,s=this.firstIndex,o=i-e,r=this.firstNode;t-1>s;)r=r.getNext(),s++;var a=r;for(n=0;e>n;n++)r=r.getNext(),r&&(r._previousNode=a);var u=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;i>n;n++)r=r.getNext();if(s+=i,r!==u&&(r._nextNode=u,u&&(u._previousNode=r)),u)for(r=u,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=o:r.index=s,r=r.getNext(),s++}},n.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},n.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},n.prototype.getIndex=function(){return this.index},n.prototype.toString=function(){return""+this.index},n.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},n.prototype.push=function(){this._.array.push.apply(this._.array,arguments)},n.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},n.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var n=this._previousNode,s=this._nextNode,o=this.index,r=t._previousNode,a=t._nextNode,u=t.index;this.index=u,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},n.prototype.get=function(){return this._.getValue(this.index)},n.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},n.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=n}),i("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),o=t("./Transform"),r=t("./Surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var e=t.transform,i=t.origin,s=t.opacity,a=t.size,u=r.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:s,origin:i,size:n.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),u},i.exports=n}),i("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new l(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new c,this.group.add({render:u.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var e=this.options.direction===f.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function o(t,e,i){var n=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(e);return i.push({transform:o,target:t.render()}),s.call(this,n)}function r(){return this.options.clipSize?this.options.clipSize:s.call(this,this._contextSize)}function a(){for(var t=s.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;e&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=e,t=s.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;for(var i=this._node&&this._node.getPrevious?this._node.getPrevious():null;i&&this._position+this._positionOffset<0;){var n=s.call(this,i.getSize());this._positionOffset+=n,this._node=i,i=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function u(){var t=null,e=this._position,i=[];this._onEdge=0;for(var n=-this._positionOffset,u=r.call(this),h=this._node;h&&n-e<u+this.options.margin;)n+=o.call(this,h,n,i),h=h.getNext?h.getNext():null;var c=this._node,l=s.call(this,c.getSize());if(u>n){for(;c&&u>l;)c=c.getPrevious(),c&&(l+=s.call(this,c.getSize()));for(c=this._node;c&&u>l;)c=c.getNext(),c&&(l+=s.call(this,c.getSize()))}var p=void 0!==l&&u>l?l:u;for(!h&&p>=n-e?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:n-p})):!this._node.getPrevious()&&0>=e&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,n=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));h&&n-e>-(r.call(this)+this.options.margin);)o.call(this,h,n,i),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));return a.call(this),i}var h=t("famous/core/Entity"),c=t("famous/core/Group"),l=t("famous/core/OptionsManager"),p=t("famous/core/Transform"),f=t("famous/utilities/Utility"),d=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:f.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1},n.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},n.prototype.onEdge=function(){return this._onEdge},n.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===f.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return p.inverse(t(-e))}},n.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new d({array:t})),this._node=t,this._positionOffset=0},n.prototype.getSize=function(t){return t?this._contextSize:this._size},n.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===f.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:p.multiply(e,o),size:s,opacity:i,origin:n,target:this.group.render()}},i.exports=n}),i("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t,e){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function s(t,e){r[t]&&(this._syncs[t]=new r[t](e),this.pipeSync(t))}var o=t("famous/core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2;var r={};n.register=function(t){for(var e in t){if(r[e]){if(r[e]===t[e])return;throw new Error("this key is registered to a different sync class")}r[e]=t[e]}},n.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},n.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},n.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},n.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)s.call(this,t[e]);else if(t instanceof Object)for(var i in t)s.call(this,i,t[i])},i.exports=n}),i("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&h()-this._prevTime>this.options.stallTime){this._position=void 0===this.options.direction?[0,0]:0,this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function o(t){t.preventDefault(),this._inProgress||(this._inProgress=!0,_=this._payload,_.slip=!0,_.position=this._position,_.clientX=t.clientX,_.clientY=t.clientY,_.offsetX=t.offsetX,_.offsetY=t.offsetY,this._eventOutput.emit("start",_),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=h(),i=this._prevTime||e,o=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(o*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(o)>Math.abs(r)?r=0:o=0);var c,l,p=Math.max(e-i,u),f=o/p,d=r/p,m=this.options.scale;this.options.direction===n.DIRECTION_X?(l=m*o,c=m*f,this._position+=l):this.options.direction===n.DIRECTION_Y?(l=m*r,c=m*d,this._position+=l):(l=[m*o,m*r],c=[m*f,m*d],this._position[0]+=l[0],this._position[1]+=l[1]);var _=this._payload;_.delta=l,_.velocity=c,_.position=this._position,_.slip=!0,this._eventOutput.emit("update",_),this._prevTime=e,this._prevVel=c}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");n.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},n.DIRECTION_X=0,n.DIRECTION_Y=1;var u=8,h=Date.now;n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=n}),i("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:c(),count:e.touches.length,history:i}}function s(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=n(i,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[i.identifier]||this.track(s)}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.touchHistory[i.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.eventOutput.emit("trackend",o),delete this.touchHistory[i.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t,this.touchHistory={},this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var h=t("famous/core/EventHandler"),c=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=u}),i("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a,u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",s.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function s(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var n=this._payload;n.delta=i,n.position=this._position,n.velocity=e,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var e=t.history,i=e[e.length-1],s=e[e.length-2],o=s.timestamp,r=i.timestamp,a=i.x-s.x,u=i.y-s.y;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var c,l,p=Math.max(r-o,h),f=a/p,d=u/p,m=this.options.scale;this.options.direction===n.DIRECTION_X?(l=m*a,c=m*f,this._position+=l):this.options.direction===n.DIRECTION_Y?(l=m*u,c=m*d,this._position+=l):(l=[m*a,m*u],c=[m*f,m*d],this._position[0]+=l[0],this._position[1]+=l[1]);var _=this._payload;_.delta=l,_.velocity=c,_.position=this._position,_.clientX=t.x,_.clientY=t.y,_.count=t.count,_.touch=t.identifier,this._eventOutput.emit("update",_)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),u=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},n.DIRECTION_X=0,n.DIRECTION_Y=1;var h=8;n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}),i("famous/views/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._node=null,this._physicsEngine=new _,this._particle=new g,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0]}),this.drag=new y({forceFunction:y.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new y({forceFunction:y.FORCE_FUNCTIONS.LINEAR}),this.sync=new b(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new w,this._eventOutput=new w,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),w.setInputHandler(this,this._eventInput),w.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new M,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(t),a.call(this)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),h.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.velocity,i=-t.delta;this._onEdge&&t.slip&&(0>e&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(this.getPosition()+i))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){h.call(this),this._onEdge&&f.call(this,this._edgeSpringPosition,I.EDGE),u.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",o),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function u(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function h(){this._springState=I.NONE,this._physicsEngine.detachAll()}function c(t){var e=this.options.direction,i=(t.getSize()||this._scroller.getSize())[e];return i||(i=this._scroller.getSize()[e]),i}function l(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===I.EDGE||f.call(this,this._edgeSpringPosition,I.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(h.call(this),u.call(this))),this._onEdge=t}function p(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==I.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,n=c.call(this,this._node),s=e>.5*n,o=t>0;s&&!i||i&&o?this.goToNextPage():f.call(this,0,I.PAGE),this._needsPaginationCheck=!1}}}function f(t,e){var i;e===I.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===I.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(h.call(this),this._springState=e,u.call(this)),this._springState=e}function d(){for(var t=this.getPosition(),e=c.call(this,this._node),i=this._node.getNext();t>e+z&&i;)m.call(this,-e),t-=e,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),e=c.call(this,this._node);for(var n,s=this._node.getPrevious();-z>t&&s;)n=c.call(this,s),this._scroller.sequenceFrom(s),this._node=s,m.call(this,n),t+=n,s=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===I.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===I.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var _=t("famous/physics/PhysicsEngine"),g=t("famous/physics/bodies/Particle"),y=t("famous/physics/forces/Drag"),v=t("famous/physics/forces/Spring"),w=t("famous/core/EventHandler"),S=t("famous/core/OptionsManager"),O=t("famous/core/ViewSequence"),M=t("famous/views/Scroller"),x=t("famous/utilities/Utility"),b=t("famous/inputs/GenericSync"),T=t("famous/inputs/ScrollSync"),D=t("famous/inputs/TouchSync");b.register({scroll:T,touch:D});var z=.5;n.DEFAULT_OPTIONS={direction:x.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1};var I={NONE:0,EDGE:1,PAGE:2};n.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)
},n.prototype.getPosition=function(){return this._particle.getPosition1D()},n.prototype.setPosition=function(t){this._particle.setPosition1D(t)},n.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},n.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},n.prototype.setOptions=function(t){t&&(void 0!==t.direction&&("x"===t.direction?t.direction=x.Direction.X:"y"===t.direction&&(t.direction=x.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this._scroller.setOptions(this.options),this.options.groupScroll?this._scroller.pipe(this._eventInput):this._scroller.unpipe(this._eventInput),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===x.Direction.X?b.DIRECTION_X:b.DIRECTION_Y})},n.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var e=this.getPosition(),i=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var n=z>e?-i:0;f.call(this,n,I.PAGE),m.call(this,i)}return this._eventOutput.emit("pageChange",{direction:-1}),t},n.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var e=this.getPosition(),i=c.call(this,this._node),n=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var s=e>i-z?i+n:i;f.call(this,s,I.PAGE),m.call(this,-i)}return this._eventOutput.emit("pageChange",{direction:1}),t},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new O({array:t})),this._node=t,this._scroller.sequenceFrom(t)},n.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},n.prototype.render=function(){return this._node?(d.call(this),l.call(this,this._scroller.onEdge()),this.options.paginated&&p.call(this),this._scroller.render()):null},i.exports=n}),i("views/ChatScrollView",["require","exports","module","famous/views/Scrollview"],function(t,e,i){function n(){s.apply(this,arguments)}var s=t("famous/views/Scrollview");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={},i.exports=n}),function(t){var i,n=t.Base64,s="2.1.5";"undefined"!=typeof module&&module.exports&&(i=e("buffer").Buffer);var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(t){for(var e={},i=0,n=t.length;n>i;i++)e[t.charAt(i)]=i;return e}(o),a=String.fromCharCode,u=function(t){if(t.length<2){var e=t.charCodeAt(0);return 128>e?t:2048>e?a(192|e>>>6)+a(128|63&e):a(224|e>>>12&15)+a(128|e>>>6&63)+a(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|e>>>18&7)+a(128|e>>>12&63)+a(128|e>>>6&63)+a(128|63&e)},h=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(t){return t.replace(h,u)},l=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),n=[o.charAt(i>>>18),o.charAt(i>>>12&63),e>=2?"=":o.charAt(i>>>6&63),e>=1?"=":o.charAt(63&i)];return n.join("")},p=t.btoa?function(e){return t.btoa(e)}:function(t){return t.replace(/[\s\S]{1,3}/g,l)},f=i?function(t){return new i(t).toString("base64")}:function(t){return p(c(t))},d=function(t,e){return e?f(t).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):f(t)},m=function(t){return d(t,!0)},_=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),g=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return a((i>>>10)+55296)+a((1023&i)+56320);case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},y=function(t){return t.replace(_,g)},v=function(t){var e=t.length,i=e%4,n=(e>0?r[t.charAt(0)]<<18:0)|(e>1?r[t.charAt(1)]<<12:0)|(e>2?r[t.charAt(2)]<<6:0)|(e>3?r[t.charAt(3)]:0),s=[a(n>>>16),a(n>>>8&255),a(255&n)];return s.length-=[0,0,2,1][i],s.join("")},w=t.atob?function(e){return t.atob(e)}:function(t){return t.replace(/[\s\S]{1,4}/g,v)},S=i?function(t){return new i(t,"base64").toString()}:function(t){return y(w(t))},O=function(t){return S(t.replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},M=function(){var e=t.Base64;return t.Base64=n,e};if(t.Base64={VERSION:s,atob:w,btoa:p,fromBase64:O,toBase64:d,utob:c,encode:d,encodeURI:m,btou:y,decode:O,noConflict:M},"function"==typeof Object.defineProperty){var x=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return O(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(t){return d(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return d(this,!0)}))}}}(this),this.Meteor&&(Base64=global.Base64),i("js-base64",function(){}),function(t){function n(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(t,e){function i(){de.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var n=!0;return l(function(){return n&&(i(),n=!1),e.apply(this,arguments)},e)}function r(t,e){return function(i){return d(t.call(this,i),e)}}function a(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function u(){}function h(t){D(t),l(this,t)}function c(t){var e=w(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,u=e.minute||0,h=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*h+6e4*u+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._bubble()}function l(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function p(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&ze.hasOwnProperty(e)&&(i[e]=t[e]);return i}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function d(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function m(t,e,i,n){var s=e._milliseconds,o=e._days,r=e._months;n=null==n?!0:n,s&&t._d.setTime(+t._d+s*i),o&&he(t,"Date",ue(t,"Date")+o*i),r&&ae(t,ue(t,"Month")+r*i),n&&de.updateOffset(t,o||r)}function _(t){return"[object Array]"===Object.prototype.toString.call(t)}function g(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function y(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&O(t[n])!==O(e[n]))&&r++;return r+o}function v(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ni[t]||si[e]||e}return t}function w(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=v(i),e&&(n[e]=t[i]));return n}function S(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}de[e]=function(s,o){var r,a,u=de.fn._lang[e],h=[];if("number"==typeof s&&(o=s,s=t),a=function(t){var e=de().utc().set(n,t);return u.call(de.fn._lang,e,s||"")},null!=o)return a(o);for(r=0;i>r;r++)h.push(a(r));return h}}function O(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function M(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function x(t,e,i){return ne(de([t,11,31+e-i]),e,i).week}function b(t){return T(t)?366:365}function T(t){return t%4===0&&t%100!==0||t%400===0}function D(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Se]<0||t._a[Se]>11?Se:t._a[Oe]<1||t._a[Oe]>M(t._a[we],t._a[Se])?Oe:t._a[Me]<0||t._a[Me]>23?Me:t._a[xe]<0||t._a[xe]>59?xe:t._a[be]<0||t._a[be]>59?be:t._a[Te]<0||t._a[Te]>999?Te:-1,t._pf._overflowDayOfYear&&(we>e||e>Oe)&&(e=Oe),t._pf.overflow=e)}function z(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function I(t){return t?t.toLowerCase().replace("_","-"):t}function C(t,e){return e._isUTC?de(t).zone(e._offset||0):de(t).local()}function E(t,e){return e.abbr=t,De[t]||(De[t]=new u),De[t].set(e),De[t]}function k(t){delete De[t]}function P(t){var i,n,s,o,r=0,a=function(t){if(!De[t]&&Ie)try{e("./lang/"+t)}catch(i){}return De[t]};if(!t)return de.fn._lang;if(!_(t)){if(n=a(t))return n;t=[t]}for(;r<t.length;){for(o=I(t[r]).split("-"),i=o.length,s=I(t[r+1]),s=s?s.split("-"):null;i>0;){if(n=a(o.slice(0,i).join("-")))return n;if(s&&s.length>=i&&y(o,s,!0)>=i-1)break;i--}r++}return de.fn._lang}function F(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,i,n=t.match(Pe);for(e=0,i=n.length;i>e;e++)n[e]=hi[n[e]]?hi[n[e]]:F(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function N(t,e){return t.isValid()?(e=Y(e,t.lang()),oi[e]||(oi[e]=A(e)),oi[e](t)):t.lang().invalidDate()}function Y(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Fe.lastIndex=0;n>=0&&Fe.test(t);)t=t.replace(Fe,i),Fe.lastIndex=0,n-=1;return t}function L(t,e){var i,n=e._strict;switch(t){case"Q":return qe;case"DDDD":return We;case"YYYY":case"GGGG":case"gggg":return n?Ze:Ye;case"Y":case"G":case"g":return Qe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Xe:Le;case"S":if(n)return qe;case"SS":if(n)return je;case"SSS":if(n)return We;case"DDD":return Ne;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ve;case"a":case"A":return P(e._l)._meridiemParse;case"X":return Re;case"Z":case"ZZ":return Ge;case"T":return Ue;case"SSSS":return He;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?je:Ae;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ae;case"Do":return Be;default:return i=new RegExp(W(j(t.replace("\\","")),"i"))}}function H(t){t=t||"";var e=t.match(Ge)||[],i=e[e.length-1]||[],n=(i+"").match(ei)||["-",0,0],s=+(60*n[1])+O(n[2]);return"+"===n[0]?-s:s}function V(t,e,i){var n,s=i._a;switch(t){case"Q":null!=e&&(s[Se]=3*(O(e)-1));break;case"M":case"MM":null!=e&&(s[Se]=O(e)-1);break;case"MMM":case"MMMM":n=P(i._l).monthsParse(e),null!=n?s[Se]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[Oe]=O(e));break;case"Do":null!=e&&(s[Oe]=O(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=O(e));break;case"YY":s[we]=de.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[we]=O(e);break;case"a":case"A":i._isPm=P(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[Me]=O(e);break;case"m":case"mm":s[xe]=O(e);break;case"s":case"ss":s[be]=O(e);break;case"S":case"SS":case"SSS":case"SSSS":s[Te]=O(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=H(e);break;case"dd":case"ddd":case"dddd":n=P(i._l).weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=O(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=de.parseTwoDigitYear(e)}}function G(t){var e,i,s,o,r,a,u,h;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,a=4,i=n(e.GG,t._a[we],ne(de(),1,4).year),s=n(e.W,1),o=n(e.E,1)):(h=P(t._l),r=h._week.dow,a=h._week.doy,i=n(e.gg,t._a[we],ne(de(),r,a).year),s=n(e.w,1),null!=e.d?(o=e.d,r>o&&++s):o=null!=e.e?e.e+r:r),u=se(i,s,o,a,r),t._a[we]=u.year,t._dayOfYear=u.dayOfYear}function U(t){var e,i,s,o,r=[];if(!t._d){for(s=B(t),t._w&&null==t._a[Oe]&&null==t._a[Se]&&G(t),t._dayOfYear&&(o=n(t._a[we],s[we]),t._dayOfYear>b(o)&&(t._pf._overflowDayOfYear=!0),i=K(o,0,t._dayOfYear),t._a[Se]=i.getUTCMonth(),t._a[Oe]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=s[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];t._d=(t._useUTC?K:$).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function R(t){var e;t._d||(e=w(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],U(t))}function B(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function q(t){if(t._f===de.ISO_8601)return void X(t);t._a=[],t._pf.empty=!0;var e,i,n,s,o,r=P(t._l),a=""+t._i,u=a.length,h=0;for(n=Y(t._f,r).match(Pe)||[],e=0;e<n.length;e++)s=n[e],i=(a.match(L(s,t))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),h+=i.length),hi[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),V(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=u-h,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[Me]<12&&(t._a[Me]+=12),t._isPm===!1&&12===t._a[Me]&&(t._a[Me]=0),U(t),D(t)}function j(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function W(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t){var e,i,n,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=l({},t),e._pf=s(),e._f=t._f[o],q(e),z(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==n||n>r)&&(n=r,i=e));l(t,i||e)}function X(t){var e,i,n=t._i,s=Je.exec(n);if(s){for(t._pf.iso=!0,e=0,i=Ke.length;i>e;e++)if(Ke[e][1].exec(n)){t._f=Ke[e][0]+(s[6]||" ");break}for(e=0,i=ti.length;i>e;e++)if(ti[e][1].exec(n)){t._f+=ti[e][0];break}n.match(Ge)&&(t._f+="Z"),q(t)}else t._isValid=!1}function Q(t){X(t),t._isValid===!1&&(delete t._isValid,de.createFromInputFallback(t))}function J(e){var i=e._i,n=Ce.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?Q(e):_(i)?(e._a=i.slice(0),U(e)):g(i)?e._d=new Date(+i):"object"==typeof i?R(e):"number"==typeof i?e._d=new Date(i):de.createFromInputFallback(e)}function $(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return 1970>t&&a.setFullYear(t),a}function K(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function te(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function ee(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function ie(t,e,i){var n=ve(Math.abs(t)/1e3),s=ve(n/60),o=ve(s/60),r=ve(o/24),a=ve(r/365),u=n<ri.s&&["s",n]||1===s&&["m"]||s<ri.m&&["mm",s]||1===o&&["h"]||o<ri.h&&["hh",o]||1===r&&["d"]||r<=ri.dd&&["dd",r]||r<=ri.dm&&["M"]||r<ri.dy&&["MM",ve(r/30)]||1===a&&["y"]||["yy",a];return u[2]=e,u[3]=t>0,u[4]=i,ee.apply({},u)}function ne(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=de(t).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function se(t,e,i,n,s){var o,r,a=K(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:s,o=s-a+(a>n?7:0)-(s>a?7:0),r=7*(e-1)+(i-s)+o+1,{year:r>0?t:t-1,dayOfYear:r>0?r:b(t-1)+r}}function oe(e){var i=e._i,n=e._f;return null===i||n===t&&""===i?de.invalid({nullInput:!0}):("string"==typeof i&&(e._i=i=P().preparse(i)),de.isMoment(i)?(e=p(i),e._d=new Date(+i._d)):n?_(n)?Z(e):q(e):J(e),new h(e))}function re(t,e){var i,n;if(1===e.length&&_(e[0])&&(e=e[0]),!e.length)return de();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function ae(t,e){var i;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),M(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function ue(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function he(t,e,i){return"Month"===e?ae(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function ce(t,e){return function(i){return null!=i?(he(this,t,i),de.updateOffset(this,e),this):ue(this,t)}}function le(t){de.duration.fn[t]=function(){return this._data[t]}}function pe(t,e){de.duration.fn["as"+t]=function(){return+this/e}}function fe(t){"undefined"==typeof ender&&(me=ye.moment,ye.moment=t?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",de):de)}for(var de,me,_e,ge="2.7.0",ye="undefined"!=typeof global?global:this,ve=Math.round,we=0,Se=1,Oe=2,Me=3,xe=4,be=5,Te=6,De={},ze={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ie="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,Ee=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ke=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Pe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Fe=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ae=/\d\d?/,Ne=/\d{1,3}/,Ye=/\d{1,4}/,Le=/[+\-]?\d{1,6}/,He=/\d+/,Ve=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ge=/Z|[\+\-]\d\d:?\d\d/gi,Ue=/T/i,Re=/[\+\-]?\d+(\.\d{1,3})?/,Be=/\d{1,2}/,qe=/\d/,je=/\d\d/,We=/\d{3}/,Ze=/\d{4}/,Xe=/[+-]?\d{6}/,Qe=/[+-]?\d+/,Je=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$e="YYYY-MM-DDTHH:mm:ssZ",Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ti=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ei=/([\+\-]|\d\d)/gi,ii=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ni={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},si={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},oi={},ri={s:45,m:45,h:22,dd:25,dm:45,dy:345},ai="DDD w W M D d".split(" "),ui="M D H h m s w W".split(" "),hi={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return d(this.year()%100,2)},YYYY:function(){return d(this.year(),4)},YYYYY:function(){return d(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+d(Math.abs(t),6)},gg:function(){return d(this.weekYear()%100,2)},gggg:function(){return d(this.weekYear(),4)},ggggg:function(){return d(this.weekYear(),5)},GG:function(){return d(this.isoWeekYear()%100,2)},GGGG:function(){return d(this.isoWeekYear(),4)},GGGGG:function(){return d(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return O(this.milliseconds()/100)},SS:function(){return d(O(this.milliseconds()/10),2)},SSS:function(){return d(this.milliseconds(),3)},SSSS:function(){return d(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+d(O(t/60),2)+":"+d(O(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+d(O(t/60),2)+d(O(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ci=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ai.length;)_e=ai.pop(),hi[_e+"o"]=a(hi[_e],_e);for(;ui.length;)_e=ui.pop(),hi[_e+_e]=r(hi[_e],2);for(hi.DDDD=r(hi.DDD,3),l(u.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=de.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=de([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ne(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),de=function(e,i,n,o){var r;return"boolean"==typeof n&&(o=n,n=t),r={},r._isAMomentObject=!0,r._i=e,r._f=i,r._l=n,r._strict=o,r._isUTC=!1,r._pf=s(),oe(r)},de.suppressDeprecationWarnings=!1,de.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),de.min=function(){var t=[].slice.call(arguments,0);return re("isBefore",t)},de.max=function(){var t=[].slice.call(arguments,0);return re("isAfter",t)},de.utc=function(e,i,n,o){var r;return"boolean"==typeof n&&(o=n,n=t),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=n,r._i=e,r._f=i,r._strict=o,r._pf=s(),oe(r).utc()},de.unix=function(t){return de(1e3*t)},de.duration=function(t,e){var i,n,s,o=t,r=null;return de.isDuration(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(r=Ee.exec(t))?(i="-"===r[1]?-1:1,o={y:0,d:O(r[Oe])*i,h:O(r[Me])*i,m:O(r[xe])*i,s:O(r[be])*i,ms:O(r[Te])*i}):(r=ke.exec(t))&&(i="-"===r[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},o={y:s(r[2]),M:s(r[3]),d:s(r[4]),h:s(r[5]),m:s(r[6]),s:s(r[7]),w:s(r[8])}),n=new c(o),de.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},de.version=ge,de.defaultFormat=$e,de.ISO_8601=function(){},de.momentProperties=ze,de.updateOffset=function(){},de.relativeTimeThreshold=function(e,i){return ri[e]===t?!1:(ri[e]=i,!0)},de.lang=function(t,e){var i;return t?(e?E(I(t),e):null===e?(k(t),t="en"):De[t]||P(t),i=de.duration.fn._lang=de.fn._lang=P(t),i._abbr):de.fn._lang._abbr},de.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),P(t)},de.isMoment=function(t){return t instanceof h||null!=t&&t.hasOwnProperty("_isAMomentObject")},de.isDuration=function(t){return t instanceof c},_e=ci.length-1;_e>=0;--_e)S(ci[_e]);de.normalizeUnits=function(t){return v(t)},de.invalid=function(t){var e=de.utc(0/0);return null!=t?l(e._pf,t):e._pf.userInvalidated=!0,e},de.parseZone=function(){return de.apply(null,arguments).parseZone()},de.parseTwoDigitYear=function(t){return O(t)+(O(t)>68?1900:2e3)},l(de.fn=h.prototype,{clone:function(){return de(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=de(this).utc();return 0<t.year()&&t.year()<=9999?N(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return z(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?de.utc(this._a):de(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=N(this,t||de.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t&&"string"==typeof e?de.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?de.duration(+e,t):de.duration(t,e),m(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t&&"string"==typeof e?de.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?de.duration(+e,t):de.duration(t,e),m(this,i,-1),this},diff:function(t,e,i){var n,s,o=C(t,this),r=6e4*(this.zone()-o.zone());return e=v(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-de(this).startOf("month")-(o-de(o).startOf("month")))/n,s-=6e4*(this.zone()-de(this).startOf("month").zone()-(o.zone()-de(o).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?s:f(s)},from:function(t,e){return de.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(de(),t)},calendar:function(t){var e=t||de(),i=C(e,this).startOf("day"),n=this.diff(i,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.lang().calendar(s,this))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=te(t,this.lang()),this.add({d:t-e})):e},month:ce("Month",!0),startOf:function(t){switch(t=v(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=v(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+de(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+de(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+C(t,this).startOf(e)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=de.apply(null,arguments),this>t?this:t}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=de.apply(null,arguments),t>this?this:t}),zone:function(t,e){var i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=H(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,i!==t&&(!e||this._changeInProgress?m(this,de.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,de.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?de(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return M(this.year(),this.month())},dayOfYear:function(t){var e=ve((de(this).startOf("day")-de(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ne(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=ne(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=ne(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return x(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return x(this.year(),t.dow,t.doy)},get:function(t){return t=v(t),this[t]()},set:function(t,e){return t=v(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=P(e),this)}}),de.fn.millisecond=de.fn.milliseconds=ce("Milliseconds",!1),de.fn.second=de.fn.seconds=ce("Seconds",!1),de.fn.minute=de.fn.minutes=ce("Minutes",!1),de.fn.hour=de.fn.hours=ce("Hours",!0),de.fn.date=ce("Date",!0),de.fn.dates=o("dates accessor is deprecated. Use date instead.",ce("Date",!0)),de.fn.year=ce("FullYear",!0),de.fn.years=o("years accessor is deprecated. Use year instead.",ce("FullYear",!0)),de.fn.days=de.fn.day,de.fn.months=de.fn.month,de.fn.weeks=de.fn.week,de.fn.isoWeeks=de.fn.isoWeek,de.fn.quarters=de.fn.quarter,de.fn.toJSON=de.fn.toISOString,l(de.duration.fn=c.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,o=this._days,r=this._months,a=this._data;a.milliseconds=s%1e3,t=f(s/1e3),a.seconds=t%60,e=f(t/60),a.minutes=e%60,i=f(e/60),a.hours=i%24,o+=f(i/24),a.days=o%30,r+=f(o/30),a.months=r%12,n=f(r/12),a.years=n
},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*O(this._months/12)},humanize:function(t){var e=+this,i=ie(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=de.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=de.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=v(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=v(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:de.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(_e in ii)ii.hasOwnProperty(_e)&&(pe(_e,ii[_e]),le(_e.toLowerCase()));pe("Weeks",6048e5),de.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},de.lang("en",{ordinal:function(t){var e=t%10,i=1===O(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Ie?module.exports=de:"function"==typeof i&&i.amd?(i("moment",["require","exports","module"],function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(ye.moment=me),de}),fe(!0)):fe()}.call(this),i("momentjs",function(){}),i("views/MessageView",["require","exports","module","js-base64","momentjs","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/surfaces/ImageSurface","famous/surfaces/ContainerSurface","famous/utilities/Timer","famous/views/HeaderFooterLayout"],function(t,e,i){function s(t){var e=this;this.message=t.data,this.createdTime=moment(),h.apply(this,arguments),o.call(this),r.call(this),a.call(this),u.call(this),m.setInterval(function(){e.messageBox._currTarget&&e.tickActions.call(e)},this.options.animationDuration/10)}function o(){this.container=new d,this.containerTranslateModifier=new p({transform:l.translate(window.innerWidth,0)}),this.containerRotateModifier=new p({transform:l.rotateZ(Math.PI)}),this.containerModifier=new p,this.containerModifier.setSize([void 0,this.options.messageMinHeight]),this.layout=new _({headerSize:this.options.messageMinHeight,footerSize:20}),this.layoutModifier=new p,this.container.add(this.layoutModifier).add(this.layout),this.container.pipe(this._eventOutput),this.add(this.containerTranslateModifier).add(this.containerRotateModifier).add(this.containerModifier).add(this.container)}function r(){this.avatar=new f({classes:["no-selection","avatar"],size:[this.options.avatarHeight,this.options.avatarWidth],content:this.options.avatarUrl.prefix+this.message.content.user+this.options.avatarUrl.postfix,properties:this.options.avatarProperties}),this.avatarModifier=new p({opacity:0,origin:[0,0],transform:l.translate(this.options.avatarOffset,this.options.avatarOffset,.1)}),this.avatar.pipe(this.container),this.layout.header.add(this.avatarModifier).add(this.avatar)}function a(){this.messageBox=new c({classes:["new"],size:[window.innerWidth-3*this.options.avatarOffset-this.options.avatarWidth,void 0],content:'<div class="text-surface">'+n.makeHtml(Base64.decode(this.message.content.message)+"&nbsp;")+"</div>",properties:this.options.messageBoxProperties}),this.messageBoxModifier=new p({opacity:0,origin:[.5,0],transform:l.translate(this.options.avatarOffset,this.options.avatarOffset,.1)}),this.messageBox.pipe(this.container),this.layout.header.add(this.messageBoxModifier).add(this.messageBox)}function u(){this.options.timeAgoProperties.created=new Date(this.message.created).getTime(),this.timeAgo=new c({classes:["no-selection","timeago"],content:'<i class="fa fa-clock-o"></i> '+moment(this.message.created).fromNow()+"</span>",properties:this.options.timeAgoProperties}),this.timeAgoModifier=new p({opacity:0}),this.timeAgo.pipe(this.container),this.layout.footer.add(this.timeAgoModifier).add(this.timeAgo)}t("js-base64"),t("momentjs");var h=t("famous/core/View"),c=t("famous/core/Surface"),l=t("famous/core/Transform"),p=t("famous/modifiers/StateModifier"),f=t("famous/surfaces/ImageSurface"),d=t("famous/surfaces/ContainerSurface"),m=t("famous/utilities/Timer"),_=t("famous/views/HeaderFooterLayout");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={animationDuration:1200,avatarHeight:50,avatarOffset:10,avatarProperties:{border:"3px solid rgba(255, 255, 255, 0.33)",borderRadius:"999em"},avatarUrl:{postfix:"?s=200&d=identicon",prefix:"http://www.gravatar.com/avatar/"},avatarWidth:50,messageBoxProperties:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"4px",fontSize:"14px",fontWeight:"300",lineHeight:"1.6em",margin:"8px 0 0 20px"},messageMinHeight:32,newMessageDelay:6e3,timeAgoProperties:{fontSize:"10px",color:"rgba(255, 255, 255, 1)",textAlign:"right",lineHeight:"16px",fontWeight:"400",paddingRight:"10px",created:null}},s.prototype.tickActions=function(){this.createdTime<moment()-this.options.newMessageDelay&&this.messageBox.removeClass("new");var t=this.messageBox._currTarget.firstChild.offsetHeight,e=this.messageBox.getSize(),i=this.container.getSize(),n=t+8+10,s=moment(parseInt(this.timeAgo.properties.created,0)).fromNow();e[1]=e[1]?e[1]:0,n<this.options.avatarHeight&&(n=this.options.avatarHeight),e[1]<t&&(this.messageBox.setSize([e[0],t],{duration:this.options.animationDuration/3}),this.containerModifier.setSize([i[0],n+2*this.options.avatarOffset],{duration:this.options.animationDuration/3})),this.timeAgo.setContent('<i class="fa fa-clock-o"></i> '+s)},s.prototype.showMessage=function(){this.messageBoxModifier.setOpacity(1,{duration:this.options.animationDuration/3}),this.avatarModifier.setOpacity(1,{duration:this.options.animationDuration/3}),this.timeAgoModifier.setOpacity(1,{duration:this.options.animationDuration/3})},i.exports=s}),i("views/ChatView",["require","exports","module","famous/core/View","famous/core/Transform","famous/core/RenderNode","famous/modifiers/StateModifier","famous/surfaces/ContainerSurface","famous/views/HeaderFooterLayout","views/ChatHeaderView","views/ChatFooterView","views/ChatScrollView","views/MessageView"],function(t,e,i){function n(){this.messages=[],this.messagesRaw=[],this.latestMessageDate=new Date(-1),this.currentPage=0,this.snd=new Audio("audio/newMessage.mp3"),l.apply(this,arguments),s.call(this),o.call(this),r.call(this),a.call(this),u.call(this),c.call(this)}function s(){this.layout=new _({headerSize:this.options.headerSize,footerSize:this.options.footerSize});var t=new d({transform:p.translate(0,0,.1)});this.add(t).add(this.layout)}function o(){this.chatHeaderView=new g,this.chatHeaderModifier=new d({opacity:0}),this.layout.header.add(this.chatHeaderModifier).add(this.chatHeaderView)}function r(){this.chatFooterView=new y,this.chatFooterModifier=new d({opacity:0}),this.chatFooterView.pipe(this._eventOutput),this.layout.footer.add(this.chatFooterModifier).add(this.chatFooterView)}function a(){this.scrollContainer=new m,this.scrollView=new v,this.scrollContainerTranslateModifier=new d({transform:p.translate(window.innerWidth,window.innerHeight-this.options.headerSize-4*this.options.footerSize)}),this.scrollContainerRotateModifier=new d({transform:p.rotateZ(Math.PI)}),this.scrollViewModifier=new d,this.scrollContainer.add(this.scrollViewModifier).add(this.scrollView),this.layout.content.add(this.scrollContainerTranslateModifier).add(this.scrollContainerRotateModifier).add(this.scrollContainer),this.scrollNode=new f(this.scrollViewModifier),this.scrollNode.add(this.scrollView),this.scrollView.sequenceFrom(this.messages)}function u(){this.chatHeaderModifier.setOpacity(1,{duration:this.options.animationDuration/3}),this.chatFooterModifier.setOpacity(1,{duration:this.options.animationDuration/3}),this.chatHeaderView.bounceTitle()}function h(t){this.currentPage+=t.direction}function c(){this.scrollView.on("pageChange",h.bind(this))}var l=t("famous/core/View"),p=t("famous/core/Transform"),f=t("famous/core/RenderNode"),d=t("famous/modifiers/StateModifier"),m=t("famous/surfaces/ContainerSurface"),_=t("famous/views/HeaderFooterLayout"),g=t("views/ChatHeaderView"),y=t("views/ChatFooterView"),v=t("views/ChatScrollView"),w=t("views/MessageView");n.prototype=Object.create(l.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={animationDuration:1200,footerSize:42,headerSize:64},n.prototype.loadMessages=function(t){var e;if(t&&"failed"!==t.this){for(e=t.with.length-1;e>=0;e--){var i=new Date(t.with[e].created);if(this.latestMessageDate<i){var n={loaded:!1,item:t.with[e]};this.messagesRaw.unshift(n),t.with[e].internal||(this.latestMessageDate=i)}}for(e=0;e<this.messagesRaw.length;e++)this.messagesRaw[e].loaded===!1&&(this.renderMessage(this.messagesRaw[e].item),this.messagesRaw[e].loaded=!0)}},n.prototype.renderMessage=function(t){if(t){var e=new w({data:t});e.pipe(this.scrollView),this.messages.unshift(e),e.showMessage(),this.snd.play()}},i.exports=n}),i("DweetAdapter",["require","exports","module"],function(t,e,i){function n(t){this.thing=t,this.feedUrl="https://dweet.io:443/get/dweets/for/"+this.thing+"?callback",this.postUrl="https://dweet.io:443/dweet/for/"+this.thing}n.prototype.constructor=n,n.prototype.getFeed=function(t,e){JSONP(this.feedUrl,t,e)},n.prototype.sendMessage=function(t,e,i){var n=this,s={message:t,user:e};s=JSON.stringify(s);var o=new XMLHttpRequest;o.open("POST",this.postUrl,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&n.getFeed(i)},o.send(s)},i.exports=n}),i("Bot",["require","exports","module"],function(t,e,i){function n(){this.botUser=md5("bot@neverchat.io"),this.messages={welcome:"Welcome, to **neverchat.io**!",email:"Please, tell me your email for **Gravatar**. We promice that it won't get furter than your device... we'll securely keep it encoded by **md5** and use only that way! :3 \n\n To do this you need to send this type of message `/me me@neverchat.io` just put your email. Purrr..",wrongCommand:"Your command is wrong! T_T Please check `/h` to see command examples...",wrongEmail:" is not valid email. Please, specify correct one! :3",setUser:"Hooray! Nice to meet you :3 You can now connect to rooms by typing `/r general`",setRoom:"Room changed to: ",noUser:"I am not alowed to talk to strangers, please introduce yourself. \n\n To do this you need to send this type of message `/me someone@neverchat.io`","/m":"Meow!!! :3","/help":"**Commands** \n\n* to get ID in the system send `/me me@neverchat.io` (replace `me@neverchat.io` with your email) \n\n* to change room send `/r general` (replace `general` with any room you need) \n\n* to get available commands send `/help` \n\n&nbsp;\n\n**Markdown** \n\n* to make text *cursive* use `*emphasis*`\n\n* to make text **bold** use `**bold**`\n\n* to wrap text into ``code`` use `` `code` ``, \n\nFull markdown can be found here: [http://daringfireball.net/projects/markdown/syntax](http://daringfireball.net/projects/markdown/syntax)",404:"I don't know this command... Purrr... Type `/help` to see all available commands, please."}}n.prototype.constructor=n,n.prototype.getMessage=function(t,e,i){e="undefined"!=typeof e?e:"",i="undefined"!=typeof i?i:"";var n=this.messages[t]?this.messages[t]:this.messages[404],s={"with":[{thing:"message",created:new Date,internal:!0,content:{message:Base64.encode(e+n+i),user:this.botUser}}]};return s},i.exports=n}),i("views/AppView",["require","exports","module","famous/core/View","famous/core/Transform","famous/modifiers/StateModifier","famous/surfaces/ImageSurface","famous/utilities/Timer","views/ChatView","DweetAdapter","Bot"],function(t,e,i){function n(){this.messages=[],this.feed=[],this.bot=new m,u.apply(this,arguments),s.call(this),o.call(this),a.call(this),p.setTimeout(r.bind(this),4e3)}function s(){var t=new Trianglify,e=t.generate(document.body.clientWidth,document.body.clientHeight);this.backSurface=new l({size:[void 0,void 0],content:e.dataUri});var i=new c({origin:[.5,.5],align:[.5,.5],opacity:0});this.add(i).add(this.backSurface),i.setOpacity(0,{duration:this.options.animationDuration/3}).setOpacity(1,{duration:this.options.animationDuration/3})}function o(){this.chatView=new f,this.chatViewModifier=new c({transform:h.translate(0,0)}),this.add(this.chatViewModifier).add(this.chatView)}function r(){this.sendBotMessage(["welcome","email"])}function a(){this.chatView.on("sendMessage",this.sendMessage.bind(this))}var u=t("famous/core/View"),h=t("famous/core/Transform"),c=t("famous/modifiers/StateModifier"),l=t("famous/surfaces/ImageSurface"),p=t("famous/utilities/Timer"),f=t("views/ChatView"),d=t("DweetAdapter"),m=t("Bot");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={animationDuration:1200,channel:"neverchat_",user:"",feedUpdateInterval:2e3},n.prototype._loadFeed=function(){this.dweets.getFeed(this.loadMessages.bind(this),this)},n.prototype._setRoom=function(t,e){var i=e.replace(t,"").trim(),n=""!==i?i:"global";""!==this.options.user?(this.options.channel+=md5(i),p.clear(this.dweetInterval),this.dweets=null,this.dweets=new d(this.options.channel),this.dweetInterval=p.setInterval(this._loadFeed.bind(this),this.options.feedUpdateInterval),this.chatView.loadMessages(this.bot.getMessage("setRoom","","**"+n+"**"))):this.sendBotMessage("email")},n.prototype._setUser=function(t,e){var i=e.replace(t,"").trim(),n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i?n.test(i)?(this.options.user=md5(i),this.chatView.loadMessages(this.bot.getMessage("setUser"))):this.chatView.loadMessages(this.bot.getMessage("wrongEmail","**"+i+"**")):this.chatView.loadMessages(this.bot.getMessage("wrongCommand"))},n.prototype._execCommand=function(t,e){switch(t){case"/me":this._setUser(t,e);break;case"/r":this._setRoom(t,e);break;default:this.chatView.loadMessages(this.bot.getMessage(t))}},n.prototype.sendBotMessage=function(t){"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)if("/"===t[e][0]){var i=t[e].split(" ")[0];this._execCommand(i,t[e])}else this.chatView.loadMessages(this.bot.getMessage(t[e]))},n.prototype.sendMessage=function(t){"/"===t[0]?this.sendBotMessage(t):""!==this.options.user?this.dweets.sendMessage(Base64.encode(t),this.options.user,this.loadMessages.bind(this)):this.sendBotMessage("email")},n.prototype.loadMessages=function(t){this.chatView.loadMessages(t)},i.exports=n});var n=new Showdown.converter;i("main",["require","famous/core/Engine","views/AppView"],function(t){var e=t("famous/core/Engine"),i=t("views/AppView"),n=e.createContext(),s=new i;n.setPerspective(1e3),n.add(s)}),e(["main"])}();